<div class="container">
  <% if @game_score.customer_id ==current_customer.id %>
    <h3 class="mt-3">あなたの<%=@game_title.title%>のスコア</h3>
  <% else %>
    <h3 class="mt-3"><%=@game_score.customer.name %>さんの<%=@game_title.title %>のスコア</h3>
  <% end %>
  
  <div class="row mt-3">
    <div class="col-4">
      <p class="text-center"><%=image_tag @game_title.get_game_title_image %></p>
      <h5 style="text-align: center;">現在の勝率</h5>
      <div class="" style="text-align: center;" ><h2><%=@game_score.winrate %>%</h2></div>
      
      <!--自分のスコアじゃない場合はいいねを表示-->
      <% if @game_score.customer_id==current_customer.id %>
      <h3 class="mt-3" style="text-align: center;">勝敗登録をする</h3>
        <div class="text-center mx-">
          <%= link_to "Win!",new_game_score_reason_path(@game_score),class:"btn btn-outline-danger" %>
          <%= link_to "lose...",game_score_lose_reason_path(@game_score),class:"btn btn-outline-primary" %>
        </div>
       
      
      <!--いいね機能-->
      <% elsif @game_score.favorited_by?(current_customer) %>
      <div class="text-center">
        <%= link_to game_score_favorites_path(@game_score),method: :delete do %>
          いいねを取り消す<i class="fa-solid fa-star text-warning"></i>
        <% end %>
      </div>
      <% else %>
      <div class="text-center">
        <%= link_to game_score_favorites_path(@game_score),method: :post do %>
         いいねする<i class="fa-regular fa-star"></i>
        <% end %>
      </div>
      <% end %>
      <%= render "public/customers/profile",customer: @customer %>
    </div>
    
      <!--勝因グラフ-->
    <div class="col-4">
      <h3 class="text-danger">Win!</h3>
       <h3><%=@game_score.reasons.where(status: 0).count %>勝</h3>
      <%= pie_chart Reason.where(status: 0,game_score_id: @game_score.id).group(:title).count %>
    </div>
  
      <!--敗因グラフ-->
    <div class="col-4 ">
      <h3 class="text-primary">Lose...</h3>
      <h3><%=@game_score.reasons.where(status: 1).count %>敗</h3>
      <%= pie_chart Reason.where(status: 1,game_score_id: @game_score.id).group(:title).count %>
    </div>
</div>
